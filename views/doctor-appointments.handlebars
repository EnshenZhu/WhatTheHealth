<div id="links" class="medium-4 columns links" style="background-color:#f1f1f1;">
  <ul class="side-nav">
    <li><a data-link="appointments" >Appointments</a></li>
    <li><a data-link="prescription">Prescription</a></li>
    <li><a data-link="" class="active">Dashboard</a></li>
    <li><a data-link="">Payroll</a></li>    
    {{!-- <li><a data-link="dashboard">Dashboard</a></li> --}}
    <li><a data-link="">My Profile</a></li>   
  </ul>
</div>   
<script>
      $('#links').click(function(e) {  
          console.log(e)
        var url = '/doctor/' + e.target.dataset.link
        console.log(url)
        document.location.replace(url);
    });
</script>   
  <div class="medium-8 columns" style="background-color:#f1f1f1; height:fit-content;">
      
    <h1>Doctor Appointments</h1>
    <div id="appointments" class="appointments">
      <table class="doctor-appointments .table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
            <th scope="col">Patient Name</th>
            <th scope="col">Symptoms</th>
            <th scope="col">Status</th>
            <th scope="col">Checked-In</th>
            <th scope="col">Actions:</th>
          </tr>
        </thead>
        <tbody>
          {{#each galleries as |apt|}}
          <tr>
            {{#if @index}}
              <th scope="row">{{@index}}</th>
            {{else}}
              <th scope="row">Next</th>
            {{/if}}
            <td>{{this.date}}</td>
            <td>{{this.time}}</td>
            <td>{{this.patientname}}</td>
            <td>{{this.symptoms}}</td>
            <td>{{this.status}}</td>
            <td>{{this.waitingroom}}</td>
            
            <td><button data-patientid="{{this.patientid}}" style="width: 100%;">Start</button></td>
            
            <td><button style="width: 100%;">Cancel</button></td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
    <script>
      $('#appointments').click(function(e) { 
        console.log(e) 
        if(e.target.dataset.patientid){
          console.log(e.target)
          popupURL = window.location.origin + '/videoCall.html?id=' + e.target.dataset.patientid
          window.open(popupURL, "_blank");
          
        }
      })
      // refresh the page every 10 seconds in case a patient checks into their appointment
        var reload = setTimeout(reload, 10000);
        function reload() {
          location.reload()
        }
    </script>


  </div>

</div>
    
